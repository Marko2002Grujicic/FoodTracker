<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Create Account</title>
    <link
      rel="stylesheet"
      href="../static/bootstrap-5.3.2-dist/css/bootstrap.min.css"
    />
    <link rel="stylesheet" href="../static/css/formStyles.css"/>
    <link rel="icon" type="image/x-icon" href="/static/image/browserIcon.png" />
  </head>
    <div class="container mt-3">
      <div class="row justify-content-center">
        <div class="col-lg-4 mb-3">
          <img src="../static/image/createAccount.png" class="img-fluid"/>
        </div>
      </div>
      <div class="row justify-content-center registrationForm">
        <div class="col-sm-12 col-lg-8">
          <form id="registrationForm" action="{{ url_for('render_create_account')}}" method="POST">
            <div class="progress mb-3" style="height: 20px;">
              <div
                class="progress-bar"
                role="progressbar"
                style="width: 33.3%;"
                aria-valuenow="50"
                aria-valuemin="0"
                aria-valuemax="100"
                
              >
              Step 1 of 3
              </div>
            </div>
            
            <!-- Step 1: Name -->
            <div id="step1" class="text-center">
              <h2>Step 1: Enter Your Information</h2>
              <div class="form-group mt-4 px-4 text-start">
                <input
                  type="text"
                  class="form-control input-height"
                  id="name"
                  placeholder="Enter your name"
                  name="name"
                  required
                />
              </div>
              <div class="form-group mt-4 px-4">
                <input
                  type="number"
                  class="form-control input-height"
                  id="weight"
                  name="weight"
                  min="40"
                  max="200"
                  placeholder="Enter your weight in kg"
                  required
                />
              </div>
              <div class="form-group mt-4 px-4">
                <input
                  type="number"
                  class="form-control input-height"
                  id="height"
                  placeholder="Enter your height in cm"
                  max="220"
                  min="100"
                  name="height"
                  required
                />
              </div>
              <div class="form-group mt-4 px-4">
                <input
                  type="number"
                  class="form-control input-height"
                  id="calories"
                  placeholder="Enter your daily intake in kcal"
                  max="10000"
                  min="1400"
                  name="calories"
                  required
                />
              </div>
              <div class="text-start px-4">
                <div class="form-check form-check-inline mt-4">
                  <input class="form-check-input" type="radio" name="gender" id="male" value="male" checked>
                  <label class="form-check-label" for="male">
                    Male
                  </label>
                </div>
                <div class="form-check form-check-inline mt-4">
                  <input class="form-check-input" type="radio" name="gender" id="female" value="female">
                  <label class="form-check-label" for="female">
                   Female
                  </label>
                </div>
                <br/>
                <button
                type="button"
                class="btn btn-primary mt-4"
                onclick="nextStep()"
                >
                Next
              </button>
              <p id="errorText" class="text-danger text-center p-2" style="display: none;">Please fill all fields!</p>
              </div>
            </div>

            <!-- Step 2: Weekly Activity Options -->
            <div id="step2" class="text-center" style="display: none">
              <h2>Step 2: Choose Weekly Activity Level</h2>
              <div class="form-group d-grid gap-2">
                <div class="d-flex align-items-center pe-4">
                  <input type="radio" class="mx-2 form-check-input" id="not-very-active" name="activity" value="not-very-active" checked>
                  <label for="not-very-active" class="choose-activity">
                      <p class="activity-name">Not very Active</p>
                      <p class="activity-description">Spend most of the day sitting(e.g., bankteller, desk job)</p>
                    </label>
                </div>
                <div class="d-flex align-items-center pe-4">
                  <input type="radio" class="mx-2 form-check-input" id="lightly-active" name="activity" value="lightly-active">
                  <label for="lightly-active" class="choose-activity">
                    <p class="activity-name">
                      Lightly Active
                    </p>
                    <p class="activity-description">
                      Spend a good part of the day on your feet (e.g., teacher, salesperson)
                    </p>
                  </label>
                </div>
                <div class="d-flex align-items-center pe-4">
                  <input type="radio" class="mx-2 input-activity form-check-input" name="activity" id="active" value="active">
                  <label for="active" class="choose-activity">
                    <p class="activity-name">Active</p>
                    <p class="activity-description">Spend a good part of the day doing some physical activity (e.g., food server, postal carrier)</p>
                  </label>
                </div>
                  <div class="d-flex align-items-center pe-4">
                    <input type="radio" class="mx-2 form-check-input" id="very-active" name="activity" value="very-active">
                    <label for="very-active" class="choose-activity"">
                      <p class="activity-name">Very Active</p>
                      <p class="activity-description">Spend a good party of the day doing heavy physical activity (e.g., bike messenger, carpenter) </p>
                    </label>
                </div>
              <div class="container mt-4 text-start px-4">
                <button
                type="button"
                class="btn btn-primary"
                onclick="nextStep()"
              >
                Next
              </button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  onclick="prevStep()"
                >
                  Previous
                </button>
              </div>
            </div>
            <!-- Step 3: Weekly Activity Options -->
          </div>
          <div id="step3" class="text-center" style="display: none; min-height: 500px;">
            <h2>Step 3: Enter your account details</h2>
            <div class="form-group mt-4 px-4">
              <input
                type="email"
                class="form-control input-height"
                id="email"
                placeholder="Enter your Email"
                name="email"
                required
              />
            </div>
            <div class="form-group mt-4 px-4">
              <input
                type="password"
                class="form-control input-height"
                id="password"
                placeholder="Enter your password"
                name="password"
                required
              />
            </div>
            <div class="form-group mt-4 px-4">
              <input
                type="password"
                class="form-control input-height"
                id="password2"
                placeholder="Confirm your password"
                name="password2"
                required
              />
            </div>
            <div class="text-start px-4">
              <div class="form-check form-check-inline mt-4">
                <input class="form-check-input" type="radio" name="role" id="free" value="free" checked>
                <label class="form-check-label" for="free">
                  Free
                </label>
              </div>
              <div class="form-check form-check-inline mt-4">
                <input class="form-check-input" type="radio" name="role" id="premium" value="premium">
                <label class="form-check-label" for="premium">
                 Premium
                </label>
              </div>
              <div class="form-check form-check-inline mt-4">
                <input class="form-check-input" type="radio" name="role" id="trainer" value="trainer">
                <label class="form-check-label" for="trainer">
                 Trainer
                </label>
              </div>
              <div class="container mt-4">
                <button type="submit" class="btn btn-primary" onclick=" return validatePasswords()">Submit</button>
                <button
                  type="button"
                  class="btn btn-secondary"
                  onclick="prevStep()"
                >
                  Previous
                </button>
              </div>
            </div>
          
            <p id="passwordNoMatch" class="text-danger text-center p-2" style="display: none;">Passwords do not match!</p>
            <p id="passwordMinReq" class="text-danger text-center p-2" style="display: none;">Entered password does not meet minimum requirements!</p>
          </div>
          </form>
        </div>
      </div>
    </div>

    <script src="../static/bootstrap-5.3.2-dist/js/bootstrap.bundle.js"></script>
    

    <script>
      function validatePasswords() {
        const password = document.getElementById('password').value;
        const confirmedPassword = document.getElementById('password2').value;

        if (!confirmedPassword) return;

        if(password !== confirmedPassword){
          document.getElementById('passwordNoMatch').style.display ='block';
          document.getElementById('passwordMinReq').style.display = 'none';
          return false;
        }

        if (password.length < 8 || !password.match(/[A-Z]/) || !password.match(/[a-z]/) || !password.match(/[0-9]/)) {
          document.getElementById('passwordMinReq').style.display = 'block';
          document.getElementById('passwordNoMatch').style.display = 'none';
          return false;
       }
       return true;
      }
      
      function nextStep() {
        const currentStep = document.querySelector('.progress-bar');
        const name = document.getElementById('name').value;
        const weight = document.getElementById('weight').value;
        const height = document.getElementById('height').value;
        const calories = document.getElementById('calories').value;

        if(!name || !weight || !height || !calories){
          document.getElementById('errorText').style.display="block";
          return;
        }else{
          document.getElementById('errorText').style.display="none";
        }

        if (currentStep.innerHTML.trim() === 'Step 1 of 3') {
          console.log('helloo')
            // Validation for Step 1
            // If validation is successful, proceed to Step 2
            document.getElementById("step1").style.display = "none";
            document.getElementById("step2").style.display = "block";
            currentStep.style.width = "66.6%";
            currentStep.innerHTML = "Step 2 of 3";
        } else if (currentStep.innerHTML.trim() === 'Step 2 of 3') {
            document.getElementById("step2").style.display = "none";
            document.getElementById("step3").style.display = "block";
            currentStep.style.width = "100%";
            currentStep.innerHTML = "Step 3 of 3";
        }
      }

      function prevStep() {
        const currentStep = document.querySelector('.progress-bar');
        if (currentStep.innerHTML.trim() === 'Step 2 of 3') {
            document.getElementById("step2").style.display = "none";
            document.getElementById("step1").style.display = "block";
            currentStep.style.width = "33%";
            currentStep.innerHTML = "Step 1 of 3";
        } else if (currentStep.innerHTML.trim() === 'Step 3 of 3') {
            document.getElementById("step3").style.display = "none";
            document.getElementById("step2").style.display = "block";
            currentStep.style.width = "66.6%";
            currentStep.innerHTML = "Step 2 of 3";
        }
      }
    </script>
  </body>
</html>
